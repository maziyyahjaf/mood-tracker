<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Daily Mood View</title>

    <style>
        .tile-container {
            display: flex;
            gap: 5px;
        }

        .tile {
            width: 50px;
            height: 50px;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .mood-bar {
            width: 100%;
            height: 20%;
        }

        .mood-2 {
            background-color: #006400;
        }

        /* Dark Green */
        .mood-1 {
            background-color: #32CD32;
        }

        /* Light Green */
        .mood-0 {
            background-color: #FFD700;
        }

        /* Yellow */
        .mood--1 {
            background-color: #FFA500;
        }

        /* Orange */
        .mood--2 {
            background-color: #B22222;
        }

        /* Deep Red */
    </style>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>

<body>
    <div class="container mt-4">

        <h3>Daily Mood Entries</h3>
        <!-- Button to go back to normal daily view -->
        <a th:href="@{/moods/dailyview/{epochDay}(epochDay=${epochDay})}" class="btn btn-primary">
            Back to Daily View
        </a>

        <!-- Container to hold the tiles -->
        <div class="tile-container" id="tile-container"></div>

        <script>
            // Get the current URL path and extract the epochDay from it
            const pathParts = window.location.pathname.split('/');
            const epochDay = pathParts[pathParts.length - 1]; // Get the epochDay from the URL

            // API endpoint to fetch the mood entries for this day
            const apiUrl = `/moods/api/dailyview/${epochDay}`;

            // Function to fetch mood entries for the day
            fetch(apiUrl)
                .then(response => response.json())
                .then(moodEntries => {
                    const container = document.getElementById('tile-container');

                    // Loop through each mood entry and create a tile for it
                    moodEntries.forEach(entry => {
                        const moodScore = entry.moodScore;

                        // Create a tile to represent the mood entry
                        const tile = document.createElement('div');
                        tile.classList.add('tile');

                        // Add a "mood-bar" to the tile with a color matching the mood
                        const moodBar = document.createElement('div');
                        moodBar.classList.add('mood-bar', `mood-${moodScore}`);
                        tile.appendChild(moodBar);

                        container.appendChild(tile);
                    });
                })
                .catch(error => console.error('Error fetching mood entries:', error));
        </script>
    </div>
</body>

</html>